# Lec2 Distributed File System - GFS - PART1⃣️

## 引言

如上节课所说，分布式系统的基础设施最重要的就是计算和存储。而存储作为一种最常用的概念抽象，成为分布式系统的最重要的研究方向。

我们关注如何为一个大型的分布式存储系统**设计优秀的接口**、以及如何**设计存储系统的内部结构**使得系统能良好运行并满足分布式系统的特性-并行、容错、复制、一致性等等。

GFS（The Google file system）则是分布式存储系统的优秀实现之一，这个论文本身是一篇优秀的系统论文，从硬件到GFS的应用都有讨论和涉猎，且在业界GFS也有着广泛的使用。

## 分布式存储系统为什么这么难

首先从分布式存储系统的设计出发点谈起，人们设计这种系统主要是想通过增加大量的计算机资源，获得巨大的性能加成。即**性能问题**是最初的诉求。为了提升性能很自然的想法就是将数据分割到大量的机器，这样就可以并行的从多台服务器读取数据，我们将这种方式称为**Sharing分片**

如果在很多台服务器进行分片，当一台服务器宕机发生错误，需要有一种自动化的方式进行修复，即需要一个自动化的容错系统，这就引出了**容错（fault tolerance）**这个大话题

实现容错最常用的方法是使用**复制（Replication）**方法，每个分片维护2-3个副本，当一个宕机时读取另一个。

有复制，就会有**不一致性（Inconsistency）**的问题，副本原本是为了在数据发生故障时进行数据提供，但如果副本之间数据不一致，就不再可以称为副本了。

通过一些设计，可以避免不一致的问题，但为了达到一致性，需要服务器之间增加一些额外的通信交互，这就导致我们需要**损失一定的性能**。这与我们对分布式存储系统的设计初衷相违背。

当然，这里的损失不一定是会导致性能的负增长，我们依然可以通过这种方式构建性能极高的系统，但要知道整个循环是不可避免的。也就是说，如果想要好的一致性，则一定要付出相应的性能代价；而如果想要极致的性能，就要接受一定的数据不一致性。